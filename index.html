<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>15 Puzzle Generator</title>
		<meta name="viewport" content="user-scalable=yes, width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="styles.css">
		<link href="https://fonts.googleapis.com/css?family=Mallanna" rel="stylesheet">
	</head>
  <body>

    <h1>15 Puzzle Generator</h1>


    <p>This app will generate HTML, CSS and JS for you to paste into your project files to add an HTML canvas-based 15 puzzle. At least, that is the idea.</p>

    <main>

      <div id="inputs">
				<label>Color for the blank tile: <input type="color" value="#add8e6"></label>
				<label>Path to your image: <input placeholder="Optional" type="text"/></label>
        <label>Image Width in pixels: <input class="num" form="form" placeholder="Enter a number" min="0" type="number"/></label>
        <label>Image Height in pixels: <input class="num" form="form" placeholder="Enter a number" min="0" type="number"/></label>
				<p>The canvas will have the same dimensions as the image you use. Edit your image as necessary such that each tile will be the same size with no remainder pixels.</p>
				<p>Puzzle Dimensions:</p>
				<label>Width in tiles:
					<select>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5</option>
						<option>6</option>
						<option>7</option>
						<option>8</option>
					</select>
				</label>

				<label>Height in tiles:
					<select>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5</option>
						<option>6</option>
						<option>7</option>
						<option>8</option>
					</select>
				</label>

				<p id="error"></p>
				<form id="form">
					<button id="submit">Submit</button>
				</form>
				<div id="copiedPopup">copied!</div>
      </div>



			<!-- <div> -->
				<div id="buttons">
					<button class="selected">HTML</button>
					<button>CSS</button>
					<button>JS</button>
					<div id="icons">
						<button id="copy"></button>
						<a href="mailto:?Code%20for%20the%2015%20puzzle"><button id="email"></button></a>
					</div>
				</div>

	      <div id="code">
					<pre id="html"><code>&lt;canvas width="</code><span>%</span><code>" height="</code><span>%</span><code>"&gt;
						&nbsp;&nbsp;Your browser does not support canvas.
						&lt;/canvas&gt;</code>
					</pre>

					<pre id="css"><code>canvas{
						&nbsp;&nbsp;background-color: <span>lightblue</span>;
						&nbsp;&nbsp;min-width: </code><span>%</span><code>px;
						}</code>
					</pre>

					<pre id="js"><code>const canvas = document.querySelector('canvas');
						let ctx = canvas.getContext('2d');
						let canvArray = [], contact = new Image();
						for(let i = 0; i < </code><span class="info3">%</span><code>; i++){
						&nbsp;&nbsp;for(let j = 0; j < </code><span class="info2">%</span><code>; j++){
						&nbsp;&nbsp;&nbsp;&nbsp;canvArray.push([j * </code><span class="tileSize">%</span><code>, i * </code><span class="tileSize">%</span><code>]);
						&nbsp;&nbsp;}
						}

						<span class="func">function</span> getRands(amt){
						&nbsp;&nbsp;let nums = new Set();
						&nbsp;&nbsp;while(nums.size < amt){
						&nbsp;&nbsp;&nbsp;&nbsp;let n = Math.floor(Math.random() * amt);
						&nbsp;&nbsp;&nbsp;&nbsp;nums.add(n);
						&nbsp;&nbsp;}
						&nbsp;&nbsp;return [...nums];
						}

						<span class="func">function</span> getInversions(arr){
						&nbsp;&nbsp;let inversions = 0;
						&nbsp;&nbsp;for(let i = 0; i < arr.length; i++){
						&nbsp;&nbsp;&nbsp;&nbsp;if(arr[i] == null){continue;}
						&nbsp;&nbsp;&nbsp;&nbsp;for(let j = 0; j < arr.length; j++){
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(arr[i] > arr[j + i]){
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inversions++;
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
						&nbsp;&nbsp;&nbsp;&nbsp;}
						&nbsp;&nbsp;}
						&nbsp;&nbsp;return inversions;
						}

						<span class="func">function</span> checkBoard(){
						&nbsp;&nbsp;let randos = getRands(canvArray.length - 1);
						&nbsp;&nbsp;let solArray = [];
						&nbsp;&nbsp;randos.forEach((x,i) => {
						&nbsp;&nbsp;&nbsp;&nbsp;solArray[x] = i;
						&nbsp;&nbsp;});
						&nbsp;&nbsp;return [solArray.concat([canvArray.length - 1]), randos.concat([canvArray.length - 1])];
						}

						let doable = checkBoard();
						while(getInversions(doable[0]) % 2 !== 0){
						&nbsp;&nbsp;doable = checkBoard();
						}
						let boardOrder = doable[0].slice();

						contact.onload = () => {
						&nbsp;&nbsp;for(let i = 0; i < canvArray.length - 1; i++){
						&nbsp;&nbsp;&nbsp;&nbsp;ctx.drawImage(contact, canvArray[i][0], canvArray[i][1], </code><span class="tileSize">%</span><code>, </code><span class="tileSize">%</span><code>, canvArray[doable[1][i]][0], canvArray[doable[1][i]][1], </code><span class="tileSize">%</span><code>, </code><span class="tileSize">%</span><code>);
						&nbsp;&nbsp;}
						}

						contact.src = <span id="path">'[path to your image]'</span>;

						<span class="func">function</span> swapTiles(x, y){
						&nbsp;&nbsp;if(canvArray.length === 0){return;}
						&nbsp;&nbsp;let tileClicked = (Math.floor(y / </code><span class="tileSize">%</span><code>) * </code><span class="info2">%</span><code>) + Math.floor(x / </code><span class="tileSize">%</span><code>);
						&nbsp;&nbsp;let blank = boardOrder.indexOf(canvArray.length - 1);
						&nbsp;&nbsp;let finalCheck;
						&nbsp;&nbsp;let brdInd = boardOrder[tileClicked];
						&nbsp;&nbsp;if(![1, </code><span class="info2">%</span><code>].includes(Math.abs(tileClicked - blank))){
						&nbsp;&nbsp;&nbsp;&nbsp;return;
						&nbsp;&nbsp;}
						&nbsp;&nbsp;ctx.clearRect(canvArray[tileClicked][0], canvArray[tileClicked][1], </code><span class="tileSize">%</span><code>, </code><span class="tileSize">%</span><code>);
						&nbsp;&nbsp;ctx.drawImage(contact, canvArray[brdInd][0], canvArray[brdInd][1], </code><span class="tileSize">%</span><code>, </code><span class="tileSize">%</span><code>, canvArray[blank][0], canvArray[blank][1], </code><span class="tileSize">%</span><code>, </code><span class="tileSize">%</span><code>);
						&nbsp;&nbsp;[boardOrder[tileClicked], boardOrder[blank]] = [boardOrder[blank], boardOrder[tileClicked]];
						&nbsp;&nbsp;if(boardOrder[0] === 0 && boardOrder[</code><span class="info2-1">%</span><code>] === </code><span class="info2-1">%</span><code> && boardOrder[</code><span class="info2xinfo3-1-1">%</span><code>] === </code><span class="info2xinfo3-1-1">%</span><code> && boardOrder[</code><span class="info2xinfo2-2">%</span><code>] === </code><span class="info2xinfo2-2">%</span><code>){
						&nbsp;&nbsp;&nbsp;&nbsp;finalCheck = true;
						&nbsp;&nbsp;&nbsp;&nbsp;for(let f = 0; f < boardOrder.length; f++){
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(boardOrder[f] !== f){
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;finalCheck = false;
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
						&nbsp;&nbsp;&nbsp;&nbsp;}
						&nbsp;&nbsp;}
						&nbsp;&nbsp;if(finalCheck){
						&nbsp;&nbsp;&nbsp;&nbsp;ctx.drawImage(contact, </code><span class="info2-1xtileSize">%</span><code>, </code><span class="info3-1xtileSize">%</span><code>, </code><span class="tileSize">%</span><code>, </code><span class="tileSize">%</span><code>, </code><span class="info2-1xtileSize">%</span><code>, </code><span class="info3-1xtileSize">%</span><code>, </code><span class="tileSize">%</span><code>, </code><span class="tileSize">%</span><code>);
						&nbsp;&nbsp;&nbsp;&nbsp;canvArray = [];
						&nbsp;&nbsp;}
						}

						canvas.addEventListener('click', e => {
						&nbsp;&nbsp;let x = e.offsetX;
						&nbsp;&nbsp;let y = e.offsetY;
						&nbsp;&nbsp;swapTiles(x,y);
						});


						</code>
					</pre>






	      </div>
			<!-- </div> -->
    </main>



    <script src="app.js"></script>
  </body>
</html>
